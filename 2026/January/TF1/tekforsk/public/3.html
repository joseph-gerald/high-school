<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Frequency Data</title>
    <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            font-family: monospace;
            overflow: hidden;
        }
        
        #chart {
            width: 100%;
            height: 100%;
        }

        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
            background: rgba(255,255,255,0.9);
            border: 1px solid black;
            padding: 5px 10px;
            pointer-events: none;
            font-size: 12px;
        }
    </style>
</head>
<body>

    <div id="info">Total Time: 60s | Scroll to Zoom</div>
    <div id="chart"></div>

    <script>
        // 1. The Data
        const rawValues = [
            137,137,137,138,138,137,137,137,137,137,134,126,121,133,135,143,144,138,141,140,
            139,138,137,137,136,134,131,124,126,132,133,146,137,142,141,141,140,138,135,128,
            116,128,133,132,145,146,141,139,136,132,126,120,109,95,79,85,82,86,115,134,
            142,143,145,144,142,140,138,138,139,140,138,132,122,122,129,136,139,145,140,143,
            139,138,138,138,139,141,140,135,120,125,133,140,142,146,143,143,139,135,132,138,
            146,148,144,141,122,113,117,129,138,144,147,147,148,144,141,137,136,139,142,141,
            140,133,113,124,132,136,137,138,144,147,146,143,144,141,140,138,135,129,126,121,
            113,119,129,140,151,143,150,142,142,140,139,139,139,138,136,134,128,124,121,129,
            133,135,145,139,142,141,142,141,140,143,140,140,139,138,138,137,130,115,125,133,
            136,143,141,143,140,140,140,139,140,141,141,139,139,137,130,121,128,134,137,147,
            138,148,142,142,140,139,140,141,139,134,113,115,126,134,136,146,142,145,142,142,
            141,139,139,138,130,122,125,130,132,135,135,138,144,141,144,140,140,138,139,136,
            123,129,128,135,134,138,140,142,143,141,142,140,141,140,139,133,122,124,127,136,
            137,136,138,144,145,142,143,140,137,134,133,128,127,127,132,136,135,147,140,144,
            141,141,140,139,136,130,127,128,132,133,135,137,142,144,144,142,141,140,139,138,
            129,130,126,129,132,135,137,136,144,142,143,141,141,140,139,132,126,127,132,137,
            138,135,141,145,142,143,141,140,134,132,129,130,134,137,138,137,137,146,142,143,
            139,139,138,134,130,130,130,135,135,137,138,142,143,145,138,138,137,134,123,119,
            113,109,109,115,123,133,136,142,136,135,124,116,118,122,122,124,137,140,127,136,
            132,139,150,142,142,118,129,135,142,142,119,134,133,151,135,131,114,133,141,152,
            139,114,122,132,150,137,126,141,132,126,125,147,146,138,142,147,141,130,111,92,
            38,64,127,132,124,149,149,133,128,136,156,155,124,102,90,115,95,111,94,165,
            78,131,138,148,135,141,111,16,167,148,152,135,151,152,32,33,179,150,143,124,
            142,70,14,95,166,158,120,129,122,48,31,175,154,149,119,139,149,11,77,127,113,
            135,112,132,149,141,111,111,105,94,104,124,107,144,151,149,151,149,117,100,154,
            127,81,135,155,159,157,145,155,141,145,132,134,141,141,137,141,139,128,133,142,
            142,146,143,143,140,138,139,140,138,139,144,138,136,136,136,128,126,126,127,128,
            130,129,128,133,135,142,147,148,145,145,140,141,139,135,118,112,109,119,127,131,
            134,134,142,146,149,148,145,142,143,136,116,117,114,118,124,130,133,135,137,143,
            143,145,140,139,131,126,125,129,131,133,134,134,136,138,137,137,136,138,141,138,
            136,130,125,125,128,133,140,147,142,139,128,110,109,123,126,137,138,136,135,119,
            126,129,145,143,142,122,120,137,141,140,136,137,135,143,138,138,142,147,137,128,
            128,131,133,127,125,129,132,127,132,121,113,107,117,125,124,120,127,137,135,129,
            134,145,146,138,144,143,149,146,142,131,132,138,142,143,141,137,134,143,151,149,
            149,143,142,150,154,149,142,138,142,141,143,145,153,144,140,137,136,140,137,139,
            131,126,118,122,114,131,132,122,107,106,106,122,129,118,111,112,122,143,139,123,
            92,94,134,137,90,117,149,142,101,95,129,152,140,85,99,116,145,142,90,98,117,
            133,133,104,81,107,139,137,105,71,80,92,154,128,117,52,84,79,164,122,74,69,
            73,162,146,118,67,100,100,165,124,81,56,100,160,113,89,6,76,79,157,152,126,
            98,46,77,119,159,114,70,112,139,152,90,64,79,150,115,73,111,104,129,127,132,
            133,134,134,133,134,133,134,135,134,135,138,137,136,135,135,135,135,134,135,134,
            134,134,135,135,135,134,136,144,147,138,124,110,113,118,147,146,136,125,113,112,
            119,149,145,136,124,107,112,113,144,139,136,130,103,102,97,115,146,123,143,123,
            138,130,143,156,144,144,107,108,109,133,151,137,137,110,100,102,136,151,136,132,
            97,76,101,121,152,146,141,118,105,120,149,157,146,118,109,116,122,145,151,139,
            131,128,131,135,135,134,131,132,132,132,135,136,136,137,135,142,139,138,138,136,
            137,139,141,139,138,138,137,138,138,140,139,139,139,138,137,139,137,138,138,138,
            139,140,139,139,139,137,137,136,137,137,137
        ];

        // 2. High Frequency Calculation
        const totalDurationSeconds = 60; 
        const timeStep = totalDurationSeconds / rawValues.length; // ~0.108 seconds per point

        // Helper to format "Seconds" into "mm:ss.ms"
        function formatTime(index) {
            const totalSeconds = index * timeStep;
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = Math.floor(totalSeconds % 60);
            const milliseconds = Math.floor((totalSeconds % 1) * 10); // 1 decimal place
            
            // Returns "00:05.1"
            return `${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}.${milliseconds}`;
        }

        // 3. Map Data to Index (0, 1, 2...)
        // We cheat by using the index as the "time" for the library, 
        // but we overlay the text with our custom formatter.
        const chartData = rawValues.map((val, index) => {
            return { time: index, value: val };
        });

        // 4. Create Chart
        const container = document.getElementById('chart');
        const chart = LightweightCharts.createChart(container, {
            layout: {
                background: { color: '#ffffff' },
                textColor: '#000000',
            },
            grid: {
                vertLines: { color: 'transparent' },
                horzLines: { color: '#f0f0f0' },
            },
            rightPriceScale: {
                borderColor: '#000000',
                scaleMargins: { top: 0.1, bottom: 0.1 },
            },
            timeScale: {
                borderColor: '#000000',
                // Custom Formatter: Controls the X-Axis Labels
                tickMarkFormatter: (time) => formatTime(time),
            },
            localization: {
                // Custom Formatter: Controls the Tooltip Label
                timeFormatter: (time) => formatTime(time),
            },
            crosshair: {
                mode: LightweightCharts.CrosshairMode.Normal,
            }
        });

        // 5. Add Line Series
        const lineSeries = chart.addLineSeries({
            color: '#000000',
            lineWidth: 1,
            crosshairMarkerVisible: true,
            lineType: 0,
        });

        lineSeries.setData(chartData);
        chart.timeScale().fitContent();

        // 6. Responsive Resize
        window.addEventListener('resize', () => {
            chart.resize(container.clientWidth, container.clientHeight);
        });
    </script>
</body>
</html>